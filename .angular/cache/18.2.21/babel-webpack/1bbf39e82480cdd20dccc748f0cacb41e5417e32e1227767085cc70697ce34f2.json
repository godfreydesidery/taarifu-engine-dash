{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../core/services/parliament.service\";\nimport * as i3 from \"../../../core/services/toast.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction ParliamentFormComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" Parliament name is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParliamentFormComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" Parliament name must be at least 2 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParliamentFormComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" Parliament name must not exceed 100 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParliamentFormComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" Description must not exceed 1000 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParliamentFormComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" Start date is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParliamentFormComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" End date is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParliamentFormComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" End date must be after start date \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ParliamentFormComponent_span_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 43);\n  }\n}\nfunction ParliamentFormComponent_i_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 44);\n  }\n}\nexport let ParliamentFormComponent = /*#__PURE__*/(() => {\n  class ParliamentFormComponent {\n    constructor(fb, parliamentService, toastService, router, route) {\n      this.fb = fb;\n      this.parliamentService = parliamentService;\n      this.toastService = toastService;\n      this.router = router;\n      this.route = route;\n      this.isEditMode = false;\n      this.isSubmitting = false;\n      this.parliamentId = null;\n      this.parliamentForm = this.createForm();\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        this.parliamentId = params['uid'];\n        if (this.parliamentId) {\n          this.isEditMode = true;\n          this.loadParliament();\n        }\n      });\n    }\n    createForm() {\n      return this.fb.group({\n        name: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(100)]],\n        description: ['', [Validators.maxLength(1000)]],\n        startDate: ['', Validators.required],\n        endDate: ['', Validators.required],\n        isActive: [true],\n        isCurrent: [false]\n      }, {\n        validators: this.dateRangeValidator\n      });\n    }\n    dateRangeValidator(form) {\n      const startDate = form.get('startDate')?.value;\n      const endDate = form.get('endDate')?.value;\n      if (startDate && endDate && new Date(startDate) >= new Date(endDate)) {\n        return {\n          dateRange: true\n        };\n      }\n      return null;\n    }\n    loadParliament() {\n      if (!this.parliamentId) return;\n      this.parliamentService.getParliamentByUid(this.parliamentId).subscribe({\n        next: response => {\n          if (response.status) {\n            const parliament = response.data;\n            this.parliamentForm.patchValue({\n              name: parliament.name,\n              description: parliament.description,\n              startDate: parliament.startDate.split('T')[0],\n              // Convert to date format\n              endDate: parliament.endDate.split('T')[0],\n              isActive: parliament.isActive,\n              isCurrent: parliament.isCurrent\n            });\n          } else {\n            this.toastService.error('Error', 'Failed to load parliament');\n            this.router.navigate(['/parliaments']);\n          }\n        },\n        error: error => {\n          console.error('Error loading parliament:', error);\n          this.toastService.error('Error', 'Failed to load parliament. Please try again.');\n          this.router.navigate(['/parliaments']);\n        }\n      });\n    }\n    onSubmit() {\n      if (this.parliamentForm.valid) {\n        this.isSubmitting = true;\n        const formData = this.parliamentForm.value;\n        if (this.isEditMode && this.parliamentId) {\n          const updateRequest = {\n            name: formData.name,\n            description: formData.description,\n            startDate: formData.startDate,\n            endDate: formData.endDate,\n            isActive: formData.isActive,\n            isCurrent: formData.isCurrent\n          };\n          this.parliamentService.updateParliamentByUid(this.parliamentId, updateRequest).subscribe({\n            next: response => {\n              this.isSubmitting = false;\n              if (response.status) {\n                this.toastService.success('Success', 'Parliament updated successfully');\n                this.router.navigate(['/parliaments']);\n              } else {\n                this.toastService.error('Error', 'Failed to update parliament');\n              }\n            },\n            error: error => {\n              this.isSubmitting = false;\n              console.error('Error updating parliament:', error);\n              this.toastService.error('Error', 'Failed to update parliament. Please try again.');\n            }\n          });\n        } else {\n          const createRequest = {\n            name: formData.name,\n            description: formData.description,\n            startDate: formData.startDate,\n            endDate: formData.endDate,\n            isActive: formData.isActive,\n            isCurrent: formData.isCurrent\n          };\n          this.parliamentService.createParliament(createRequest).subscribe({\n            next: response => {\n              this.isSubmitting = false;\n              if (response.status) {\n                this.toastService.success('Success', 'Parliament created successfully');\n                this.router.navigate(['/parliaments']);\n              } else {\n                this.toastService.error('Error', 'Failed to create parliament');\n              }\n            },\n            error: error => {\n              this.isSubmitting = false;\n              console.error('Error creating parliament:', error);\n              this.toastService.error('Error', 'Failed to create parliament. Please try again.');\n            }\n          });\n        }\n      }\n    }\n    onCancel() {\n      this.router.navigate(['/parliaments']);\n    }\n    static {\n      this.ɵfac = function ParliamentFormComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ParliamentFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ParliamentService), i0.ɵɵdirectiveInject(i3.ToastService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ParliamentFormComponent,\n        selectors: [[\"app-parliament-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 106,\n        vars: 21,\n        consts: [[1, \"container-fluid\"], [1, \"row\"], [1, \"col-lg-8\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-title\", \"mb-0\"], [1, \"bi\", \"bi-building\", \"me-2\"], [1, \"card-body\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"row\", \"g-3\"], [1, \"col-md-6\"], [\"for\", \"name\", 1, \"form-label\"], [1, \"text-danger\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"name\", \"placeholder\", \"Enter parliament name\", 1, \"form-control\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"description\", 1, \"form-label\"], [\"id\", \"description\", \"formControlName\", \"description\", \"rows\", \"3\", \"placeholder\", \"Enter parliament description\", 1, \"form-control\"], [\"for\", \"startDate\", 1, \"form-label\"], [\"type\", \"date\", \"id\", \"startDate\", \"formControlName\", \"startDate\", 1, \"form-control\"], [\"for\", \"endDate\", 1, \"form-label\"], [\"type\", \"date\", \"id\", \"endDate\", \"formControlName\", \"endDate\", 1, \"form-control\"], [1, \"form-check\"], [\"type\", \"checkbox\", \"id\", \"isActive\", \"formControlName\", \"isActive\", 1, \"form-check-input\"], [\"for\", \"isActive\", 1, \"form-check-label\"], [\"type\", \"checkbox\", \"id\", \"isCurrent\", \"formControlName\", \"isCurrent\", 1, \"form-check-input\"], [\"for\", \"isCurrent\", 1, \"form-check-label\"], [1, \"row\", \"mt-4\"], [1, \"col-12\"], [1, \"d-flex\", \"gap-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm me-2\", \"role\", \"status\", 4, \"ngIf\"], [\"class\", \"bi bi-check-lg me-1\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [1, \"bi\", \"bi-x-lg\", \"me-1\"], [1, \"col-lg-4\"], [1, \"bi\", \"bi-info-circle\", \"me-2\"], [1, \"list-unstyled\"], [1, \"bi\", \"bi-check-circle\", \"text-success\", \"me-2\"], [1, \"badge\", \"bg-primary\", \"me-2\"], [1, \"badge\", \"bg-success\", \"me-2\"], [1, \"badge\", \"bg-warning\", \"me-2\"], [1, \"badge\", \"bg-secondary\", \"me-2\"], [1, \"invalid-feedback\"], [\"role\", \"status\", 1, \"spinner-border\", \"spinner-border-sm\", \"me-2\"], [1, \"bi\", \"bi-check-lg\", \"me-1\"]],\n        template: function ParliamentFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\", 5);\n            i0.ɵɵelement(6, \"i\", 6);\n            i0.ɵɵtext(7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 7)(9, \"form\", 8);\n            i0.ɵɵlistener(\"ngSubmit\", function ParliamentFormComponent_Template_form_ngSubmit_9_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(10, \"div\", 9)(11, \"div\", 10)(12, \"label\", 11);\n            i0.ɵɵtext(13, \"Parliament Name \");\n            i0.ɵɵelementStart(14, \"span\", 12);\n            i0.ɵɵtext(15, \"*\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(16, \"input\", 13);\n            i0.ɵɵtemplate(17, ParliamentFormComponent_div_17_Template, 2, 0, \"div\", 14)(18, ParliamentFormComponent_div_18_Template, 2, 0, \"div\", 14)(19, ParliamentFormComponent_div_19_Template, 2, 0, \"div\", 14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"div\", 10)(21, \"label\", 15);\n            i0.ɵɵtext(22, \"Description\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"textarea\", 16);\n            i0.ɵɵtext(24, \"                    \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(25, ParliamentFormComponent_div_25_Template, 2, 0, \"div\", 14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"div\", 10)(27, \"label\", 17);\n            i0.ɵɵtext(28, \"Start Date \");\n            i0.ɵɵelementStart(29, \"span\", 12);\n            i0.ɵɵtext(30, \"*\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(31, \"input\", 18);\n            i0.ɵɵtemplate(32, ParliamentFormComponent_div_32_Template, 2, 0, \"div\", 14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(33, \"div\", 10)(34, \"label\", 19);\n            i0.ɵɵtext(35, \"End Date \");\n            i0.ɵɵelementStart(36, \"span\", 12);\n            i0.ɵɵtext(37, \"*\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(38, \"input\", 20);\n            i0.ɵɵtemplate(39, ParliamentFormComponent_div_39_Template, 2, 0, \"div\", 14)(40, ParliamentFormComponent_div_40_Template, 2, 0, \"div\", 14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(41, \"div\", 10)(42, \"div\", 21);\n            i0.ɵɵelement(43, \"input\", 22);\n            i0.ɵɵelementStart(44, \"label\", 23);\n            i0.ɵɵtext(45, \" Active Parliament \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(46, \"div\", 10)(47, \"div\", 21);\n            i0.ɵɵelement(48, \"input\", 24);\n            i0.ɵɵelementStart(49, \"label\", 25);\n            i0.ɵɵtext(50, \" Current Parliament \");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(51, \"div\", 26)(52, \"div\", 27)(53, \"div\", 28)(54, \"button\", 29);\n            i0.ɵɵtemplate(55, ParliamentFormComponent_span_55_Template, 1, 0, \"span\", 30)(56, ParliamentFormComponent_i_56_Template, 1, 0, \"i\", 31);\n            i0.ɵɵtext(57);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(58, \"button\", 32);\n            i0.ɵɵlistener(\"click\", function ParliamentFormComponent_Template_button_click_58_listener() {\n              return ctx.onCancel();\n            });\n            i0.ɵɵelement(59, \"i\", 33);\n            i0.ɵɵtext(60, \" Cancel \");\n            i0.ɵɵelementEnd()()()()()()()();\n            i0.ɵɵelementStart(61, \"div\", 34)(62, \"div\", 3)(63, \"div\", 4)(64, \"h5\", 5);\n            i0.ɵɵelement(65, \"i\", 35);\n            i0.ɵɵtext(66, \" Guidelines \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(67, \"div\", 7)(68, \"h6\");\n            i0.ɵɵtext(69, \"Creating a Parliament\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(70, \"ul\", 36)(71, \"li\");\n            i0.ɵɵelement(72, \"i\", 37);\n            i0.ɵɵtext(73, \"Provide a unique parliament name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(74, \"li\");\n            i0.ɵɵelement(75, \"i\", 37);\n            i0.ɵɵtext(76, \"Set appropriate start and end dates\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(77, \"li\");\n            i0.ɵɵelement(78, \"i\", 37);\n            i0.ɵɵtext(79, \"End date must be after start date\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(80, \"li\");\n            i0.ɵɵelement(81, \"i\", 37);\n            i0.ɵɵtext(82, \"Only one parliament can be current at a time\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(83, \"li\");\n            i0.ɵɵelement(84, \"i\", 37);\n            i0.ɵɵtext(85, \"Add description for better context\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(86, \"hr\");\n            i0.ɵɵelementStart(87, \"h6\");\n            i0.ɵɵtext(88, \"Parliament Status\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(89, \"ul\", 36)(90, \"li\")(91, \"span\", 38);\n            i0.ɵɵtext(92, \"Current\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(93, \" Currently active parliament\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(94, \"li\")(95, \"span\", 39);\n            i0.ɵɵtext(96, \"Active\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(97, \" Parliament is operational\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(98, \"li\")(99, \"span\", 40);\n            i0.ɵɵtext(100, \"Upcoming\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(101, \" Parliament not yet started\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(102, \"li\")(103, \"span\", 41);\n            i0.ɵɵtext(104, \"Ended\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(105, \" Parliament has concluded\");\n            i0.ɵɵelementEnd()()()()()()();\n          }\n          if (rf & 2) {\n            let tmp_2_0;\n            let tmp_3_0;\n            let tmp_4_0;\n            let tmp_5_0;\n            let tmp_6_0;\n            let tmp_7_0;\n            let tmp_8_0;\n            let tmp_9_0;\n            let tmp_10_0;\n            let tmp_11_0;\n            let tmp_12_0;\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate1(\" \", ctx.isEditMode ? \"Edit Parliament\" : \"Create New Parliament\", \" \");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"formGroup\", ctx.parliamentForm);\n            i0.ɵɵadvance(7);\n            i0.ɵɵclassProp(\"is-invalid\", ((tmp_2_0 = ctx.parliamentForm.get(\"name\")) == null ? null : tmp_2_0.invalid) && ((tmp_2_0 = ctx.parliamentForm.get(\"name\")) == null ? null : tmp_2_0.touched));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", (tmp_3_0 = ctx.parliamentForm.get(\"name\")) == null ? null : tmp_3_0.hasError(\"required\"));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", (tmp_4_0 = ctx.parliamentForm.get(\"name\")) == null ? null : tmp_4_0.hasError(\"minlength\"));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", (tmp_5_0 = ctx.parliamentForm.get(\"name\")) == null ? null : tmp_5_0.hasError(\"maxlength\"));\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"is-invalid\", ((tmp_6_0 = ctx.parliamentForm.get(\"description\")) == null ? null : tmp_6_0.invalid) && ((tmp_6_0 = ctx.parliamentForm.get(\"description\")) == null ? null : tmp_6_0.touched));\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", (tmp_7_0 = ctx.parliamentForm.get(\"description\")) == null ? null : tmp_7_0.hasError(\"maxlength\"));\n            i0.ɵɵadvance(6);\n            i0.ɵɵclassProp(\"is-invalid\", ((tmp_8_0 = ctx.parliamentForm.get(\"startDate\")) == null ? null : tmp_8_0.invalid) && ((tmp_8_0 = ctx.parliamentForm.get(\"startDate\")) == null ? null : tmp_8_0.touched));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", (tmp_9_0 = ctx.parliamentForm.get(\"startDate\")) == null ? null : tmp_9_0.hasError(\"required\"));\n            i0.ɵɵadvance(6);\n            i0.ɵɵclassProp(\"is-invalid\", ((tmp_10_0 = ctx.parliamentForm.get(\"endDate\")) == null ? null : tmp_10_0.invalid) && ((tmp_10_0 = ctx.parliamentForm.get(\"endDate\")) == null ? null : tmp_10_0.touched));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", (tmp_11_0 = ctx.parliamentForm.get(\"endDate\")) == null ? null : tmp_11_0.hasError(\"required\"));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", (tmp_12_0 = ctx.parliamentForm.get(\"endDate\")) == null ? null : tmp_12_0.hasError(\"dateRange\"));\n            i0.ɵɵadvance(14);\n            i0.ɵɵproperty(\"disabled\", ctx.parliamentForm.invalid || ctx.isSubmitting);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isSubmitting);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isSubmitting);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isEditMode ? \"Update Parliament\" : \"Create Parliament\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i5.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.CheckboxControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, RouterModule],\n        styles: [\".form-check-input[_ngcontent-%COMP%]:checked{background-color:#0d6efd;border-color:#0d6efd}\"]\n      });\n    }\n  }\n  return ParliamentFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}