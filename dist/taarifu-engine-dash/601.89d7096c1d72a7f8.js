"use strict";(self.webpackChunktaarifu_engine_dash=self.webpackChunktaarifu_engine_dash||[]).push([[601],{601:($,F,l)=>{l.r(F),l.d(F,{ParliamentFormComponent:()=>M});var f=l(177),n=l(4341),p=l(1069),e=l(4438),k=l(4571),D=l(5423);function P(r,s){1&r&&(e.j41(0,"div",42),e.EFF(1," Parliament name is required "),e.k0s())}function C(r,s){1&r&&(e.j41(0,"div",42),e.EFF(1," Parliament name must be at least 2 characters "),e.k0s())}function j(r,s){1&r&&(e.j41(0,"div",42),e.EFF(1," Parliament name must not exceed 100 characters "),e.k0s())}function S(r,s){1&r&&(e.j41(0,"div",42),e.EFF(1," Description must not exceed 1000 characters "),e.k0s())}function I(r,s){1&r&&(e.j41(0,"div",42),e.EFF(1," Start date is required "),e.k0s())}function R(r,s){1&r&&(e.j41(0,"div",42),e.EFF(1," End date is required "),e.k0s())}function y(r,s){1&r&&(e.j41(0,"div",42),e.EFF(1," End date must be after start date "),e.k0s())}function A(r,s){1&r&&e.nrm(0,"span",43)}function T(r,s){1&r&&e.nrm(0,"i",44)}let M=(()=>{class r{constructor(a,i,t,o,m){this.fb=a,this.parliamentService=i,this.toastService=t,this.router=o,this.route=m,this.isEditMode=!1,this.isSubmitting=!1,this.parliamentId=null,this.parliamentForm=this.createForm()}ngOnInit(){this.route.params.subscribe(a=>{this.parliamentId=a.uid,this.parliamentId&&(this.isEditMode=!0,this.loadParliament())})}createForm(){return this.fb.group({name:["",[n.k0.required,n.k0.minLength(2),n.k0.maxLength(100)]],description:["",[n.k0.maxLength(1e3)]],startDate:["",n.k0.required],endDate:["",n.k0.required],isActive:[!0],isCurrent:[!1]},{validators:this.dateRangeValidator})}dateRangeValidator(a){const i=a.get("startDate")?.value,t=a.get("endDate")?.value;return i&&t&&new Date(i)>=new Date(t)?{dateRange:!0}:null}loadParliament(){this.parliamentId&&this.parliamentService.getParliamentByUid(this.parliamentId).subscribe({next:a=>{if(a.status){const i=a.data;this.parliamentForm.patchValue({name:i.name,description:i.description,startDate:i.startDate.split("T")[0],endDate:i.endDate.split("T")[0],isActive:i.isActive,isCurrent:i.isCurrent})}else this.toastService.error("Error","Failed to load parliament"),this.router.navigate(["/parliaments"])},error:a=>{console.error("Error loading parliament:",a),this.toastService.error("Error","Failed to load parliament. Please try again."),this.router.navigate(["/parliaments"])}})}onSubmit(){if(this.parliamentForm.valid){this.isSubmitting=!0;const a=this.parliamentForm.value;this.isEditMode&&this.parliamentId?this.parliamentService.updateParliamentByUid(this.parliamentId,{name:a.name,description:a.description,startDate:a.startDate,endDate:a.endDate,isActive:a.isActive,isCurrent:a.isCurrent}).subscribe({next:t=>{this.isSubmitting=!1,t.status?(this.toastService.success("Success","Parliament updated successfully"),this.router.navigate(["/parliaments"])):this.toastService.error("Error","Failed to update parliament")},error:t=>{this.isSubmitting=!1,console.error("Error updating parliament:",t),this.toastService.error("Error","Failed to update parliament. Please try again.")}}):this.parliamentService.createParliament({name:a.name,description:a.description,startDate:a.startDate,endDate:a.endDate,isActive:a.isActive,isCurrent:a.isCurrent}).subscribe({next:t=>{this.isSubmitting=!1,t.status?(this.toastService.success("Success","Parliament created successfully"),this.router.navigate(["/parliaments"])):this.toastService.error("Error","Failed to create parliament")},error:t=>{this.isSubmitting=!1,console.error("Error creating parliament:",t),this.toastService.error("Error","Failed to create parliament. Please try again.")}})}}onCancel(){this.router.navigate(["/parliaments"])}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(n.ok),e.rXU(k.J),e.rXU(D.f),e.rXU(p.Ix),e.rXU(p.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-parliament-form"]],standalone:!0,features:[e.aNF],decls:106,vars:21,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"bi","bi-building","me-2"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-md-6"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter parliament name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3","placeholder","Enter parliament description",1,"form-control"],["for","startDate",1,"form-label"],["type","date","id","startDate","formControlName","startDate",1,"form-control"],["for","endDate",1,"form-label"],["type","date","id","endDate","formControlName","endDate",1,"form-control"],[1,"form-check"],["type","checkbox","id","isActive","formControlName","isActive",1,"form-check-input"],["for","isActive",1,"form-check-label"],["type","checkbox","id","isCurrent","formControlName","isCurrent",1,"form-check-input"],["for","isCurrent",1,"form-check-label"],[1,"row","mt-4"],[1,"col-12"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],["class","bi bi-check-lg me-1",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-x-lg","me-1"],[1,"col-lg-4"],[1,"bi","bi-info-circle","me-2"],[1,"list-unstyled"],[1,"bi","bi-check-circle","text-success","me-2"],[1,"badge","bg-primary","me-2"],[1,"badge","bg-success","me-2"],[1,"badge","bg-warning","me-2"],[1,"badge","bg-secondary","me-2"],[1,"invalid-feedback"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-lg","me-1"]],template:function(i,t){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e.nrm(6,"i",6),e.EFF(7),e.k0s()(),e.j41(8,"div",7)(9,"form",8),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(10,"div",9)(11,"div",10)(12,"label",11),e.EFF(13,"Parliament Name "),e.j41(14,"span",12),e.EFF(15,"*"),e.k0s()(),e.nrm(16,"input",13),e.DNE(17,P,2,0,"div",14)(18,C,2,0,"div",14)(19,j,2,0,"div",14),e.k0s(),e.j41(20,"div",10)(21,"label",15),e.EFF(22,"Description"),e.k0s(),e.j41(23,"textarea",16),e.EFF(24,"                    "),e.k0s(),e.DNE(25,S,2,0,"div",14),e.k0s(),e.j41(26,"div",10)(27,"label",17),e.EFF(28,"Start Date "),e.j41(29,"span",12),e.EFF(30,"*"),e.k0s()(),e.nrm(31,"input",18),e.DNE(32,I,2,0,"div",14),e.k0s(),e.j41(33,"div",10)(34,"label",19),e.EFF(35,"End Date "),e.j41(36,"span",12),e.EFF(37,"*"),e.k0s()(),e.nrm(38,"input",20),e.DNE(39,R,2,0,"div",14)(40,y,2,0,"div",14),e.k0s(),e.j41(41,"div",10)(42,"div",21),e.nrm(43,"input",22),e.j41(44,"label",23),e.EFF(45," Active Parliament "),e.k0s()()(),e.j41(46,"div",10)(47,"div",21),e.nrm(48,"input",24),e.j41(49,"label",25),e.EFF(50," Current Parliament "),e.k0s()()()(),e.j41(51,"div",26)(52,"div",27)(53,"div",28)(54,"button",29),e.DNE(55,A,1,0,"span",30)(56,T,1,0,"i",31),e.EFF(57),e.k0s(),e.j41(58,"button",32),e.bIt("click",function(){return t.onCancel()}),e.nrm(59,"i",33),e.EFF(60," Cancel "),e.k0s()()()()()()()(),e.j41(61,"div",34)(62,"div",3)(63,"div",4)(64,"h5",5),e.nrm(65,"i",35),e.EFF(66," Guidelines "),e.k0s()(),e.j41(67,"div",7)(68,"h6"),e.EFF(69,"Creating a Parliament"),e.k0s(),e.j41(70,"ul",36)(71,"li"),e.nrm(72,"i",37),e.EFF(73,"Provide a unique parliament name"),e.k0s(),e.j41(74,"li"),e.nrm(75,"i",37),e.EFF(76,"Set appropriate start and end dates"),e.k0s(),e.j41(77,"li"),e.nrm(78,"i",37),e.EFF(79,"End date must be after start date"),e.k0s(),e.j41(80,"li"),e.nrm(81,"i",37),e.EFF(82,"Only one parliament can be current at a time"),e.k0s(),e.j41(83,"li"),e.nrm(84,"i",37),e.EFF(85,"Add description for better context"),e.k0s()(),e.nrm(86,"hr"),e.j41(87,"h6"),e.EFF(88,"Parliament Status"),e.k0s(),e.j41(89,"ul",36)(90,"li")(91,"span",38),e.EFF(92,"Current"),e.k0s(),e.EFF(93," Currently active parliament"),e.k0s(),e.j41(94,"li")(95,"span",39),e.EFF(96,"Active"),e.k0s(),e.EFF(97," Parliament is operational"),e.k0s(),e.j41(98,"li")(99,"span",40),e.EFF(100,"Upcoming"),e.k0s(),e.EFF(101," Parliament not yet started"),e.k0s(),e.j41(102,"li")(103,"span",41),e.EFF(104,"Ended"),e.k0s(),e.EFF(105," Parliament has concluded"),e.k0s()()()()()()()),2&i){let o,m,v,h,d,g,u,E,c,_,b;e.R7$(7),e.SpI(" ",t.isEditMode?"Edit Parliament":"Create New Parliament"," "),e.R7$(2),e.Y8G("formGroup",t.parliamentForm),e.R7$(7),e.AVh("is-invalid",(null==(o=t.parliamentForm.get("name"))?null:o.invalid)&&(null==(o=t.parliamentForm.get("name"))?null:o.touched)),e.R7$(),e.Y8G("ngIf",null==(m=t.parliamentForm.get("name"))?null:m.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(v=t.parliamentForm.get("name"))?null:v.hasError("minlength")),e.R7$(),e.Y8G("ngIf",null==(h=t.parliamentForm.get("name"))?null:h.hasError("maxlength")),e.R7$(4),e.AVh("is-invalid",(null==(d=t.parliamentForm.get("description"))?null:d.invalid)&&(null==(d=t.parliamentForm.get("description"))?null:d.touched)),e.R7$(2),e.Y8G("ngIf",null==(g=t.parliamentForm.get("description"))?null:g.hasError("maxlength")),e.R7$(6),e.AVh("is-invalid",(null==(u=t.parliamentForm.get("startDate"))?null:u.invalid)&&(null==(u=t.parliamentForm.get("startDate"))?null:u.touched)),e.R7$(),e.Y8G("ngIf",null==(E=t.parliamentForm.get("startDate"))?null:E.hasError("required")),e.R7$(6),e.AVh("is-invalid",(null==(c=t.parliamentForm.get("endDate"))?null:c.invalid)&&(null==(c=t.parliamentForm.get("endDate"))?null:c.touched)),e.R7$(),e.Y8G("ngIf",null==(_=t.parliamentForm.get("endDate"))?null:_.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(b=t.parliamentForm.get("endDate"))?null:b.hasError("dateRange")),e.R7$(14),e.Y8G("disabled",t.parliamentForm.invalid||t.isSubmitting),e.R7$(),e.Y8G("ngIf",t.isSubmitting),e.R7$(),e.Y8G("ngIf",!t.isSubmitting),e.R7$(),e.SpI(" ",t.isEditMode?"Update Parliament":"Create Parliament"," ")}},dependencies:[f.MD,f.bT,n.X1,n.qT,n.me,n.Zm,n.BC,n.cb,n.j4,n.JD,p.iI],styles:[".form-check-input[_ngcontent-%COMP%]:checked{background-color:#0d6efd;border-color:#0d6efd}"]})}}return r})()}}]);