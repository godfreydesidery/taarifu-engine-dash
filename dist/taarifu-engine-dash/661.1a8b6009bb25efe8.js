"use strict";(self.webpackChunktaarifu_engine_dash=self.webpackChunktaarifu_engine_dash||[]).push([[661],{7661:(E,u,l)=>{l.r(u),l.d(u,{ParliamentListComponent:()=>j});var m=l(177),c=l(4341),d=l(1069);class g{static getStatusBadgeClass(r){return r.isCurrent?"bg-primary":r.inSession?"bg-success":r.hasEnded?"bg-secondary":r.hasStarted?"bg-warning":"bg-info"}static getStatusText(r){return r.isCurrent?"Current":r.inSession?"In Session":r.hasEnded?"Ended":r.hasStarted?"Active":"Upcoming"}static getDurationText(r){return r.durationInYears?`${r.durationInYears} year${r.durationInYears>1?"s":""}`:"N/A"}static isDateInPast(r){return new Date(r)<new Date}static isDateInFuture(r){return new Date(r)>new Date}static formatDate(r){return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}static getDateRangeText(r){return`${this.formatDate(r.startDate)} - ${this.formatDate(r.endDate)}`}}var t=l(4438),h=l(4571),p=l(5423),b=l(8010);const _=a=>["/parliaments/edit",a];function f(a,r){1&a&&(t.j41(0,"div",41)(1,"div",42)(2,"span",43),t.EFF(3,"Loading..."),t.k0s()(),t.j41(4,"p",44),t.EFF(5,"Loading parliaments..."),t.k0s()())}function F(a,r){1&a&&(t.j41(0,"div",41),t.nrm(1,"i",45),t.j41(2,"h5",46),t.EFF(3,"No Parliaments Found"),t.k0s(),t.j41(4,"p",47),t.EFF(5,"No parliaments match your search criteria."),t.k0s()())}function P(a,r){if(1&a){const e=t.RV6();t.j41(0,"button",64),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.setCurrentParliament(n))}),t.nrm(1,"i",65),t.k0s()}}function v(a,r){if(1&a){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"span",54),t.EFF(3),t.k0s()(),t.j41(4,"td")(5,"div")(6,"strong"),t.EFF(7),t.k0s(),t.nrm(8,"br"),t.j41(9,"small",47),t.EFF(10),t.k0s()()(),t.j41(11,"td")(12,"div")(13,"strong"),t.EFF(14),t.k0s(),t.nrm(15,"br"),t.j41(16,"small",47),t.EFF(17),t.k0s()()(),t.j41(18,"td")(19,"span",55),t.EFF(20),t.k0s()(),t.j41(21,"td")(22,"span",56),t.EFF(23),t.k0s()(),t.j41(24,"td")(25,"span",57),t.EFF(26),t.k0s()(),t.j41(27,"td")(28,"div",58)(29,"button",59),t.nrm(30,"i",60),t.k0s(),t.DNE(31,P,2,0,"button",61),t.j41(32,"button",62),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.deleteParliament(n))}),t.nrm(33,"i",63),t.k0s()()()()}if(2&a){const e=r.$implicit,i=t.XpG(2);t.R7$(3),t.JRh(e.code),t.R7$(4),t.JRh(e.name),t.R7$(3),t.JRh(e.description||"No description"),t.R7$(4),t.JRh(i.ParliamentHelper.formatDate(e.startDate)),t.R7$(3),t.SpI("to ",i.ParliamentHelper.formatDate(e.endDate),""),t.R7$(3),t.JRh(i.ParliamentHelper.getDurationText(e)),t.R7$(2),t.Y8G("ngClass",i.ParliamentHelper.getStatusBadgeClass(e)),t.R7$(),t.SpI(" ",i.ParliamentHelper.getStatusText(e)," "),t.R7$(2),t.AVh("bg-success",e.inSession)("bg-secondary",!e.inSession),t.R7$(),t.SpI(" ",e.inSession?"In Session":"Not in Session"," "),t.R7$(3),t.Y8G("routerLink",t.eq3(15,_,e.uid)),t.R7$(2),t.Y8G("ngIf",!e.isCurrent)}}function k(a,r){if(1&a){const e=t.RV6();t.j41(0,"div",48)(1,"table",49)(2,"thead",50)(3,"tr")(4,"th",51),t.bIt("click",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.onSort("code",n))}),t.EFF(5," Code "),t.nrm(6,"i",52),t.k0s(),t.j41(7,"th",51),t.bIt("click",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.onSort("name",n))}),t.EFF(8," Name "),t.nrm(9,"i",52),t.k0s(),t.j41(10,"th"),t.EFF(11,"Date Range"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Duration"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Status"),t.k0s(),t.j41(16,"th"),t.EFF(17,"Session"),t.k0s(),t.j41(18,"th"),t.EFF(19,"Actions"),t.k0s()()(),t.j41(20,"tbody"),t.DNE(21,v,34,17,"tr",53),t.k0s()()()}if(2&a){const e=t.XpG();t.R7$(6),t.AVh("bi-arrow-up","code"===e.sortBy&&"asc"===e.sortDir)("bi-arrow-down","code"===e.sortBy&&"desc"===e.sortDir),t.R7$(3),t.AVh("bi-arrow-up","name"===e.sortBy&&"asc"===e.sortDir)("bi-arrow-down","name"===e.sortBy&&"desc"===e.sortDir),t.R7$(12),t.Y8G("ngForOf",e.parliaments)}}function C(a,r){if(1&a){const e=t.RV6();t.j41(0,"li",68)(1,"button",73),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.onPageChange(n))}),t.EFF(2),t.k0s()()}if(2&a){const e=r.$implicit,i=t.XpG(2);t.AVh("active",e===i.currentPage),t.R7$(2),t.JRh(e+1)}}function S(a,r){if(1&a){const e=t.RV6();t.j41(0,"div",66)(1,"div",47),t.EFF(2),t.k0s(),t.j41(3,"nav")(4,"ul",67)(5,"li",68)(6,"button",69),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onPageChange(n.currentPage-1))}),t.nrm(7,"i",70),t.k0s()(),t.DNE(8,C,3,3,"li",71),t.j41(9,"li",68)(10,"button",69),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onPageChange(n.currentPage+1))}),t.nrm(11,"i",72),t.k0s()()()()()}if(2&a){const e=t.XpG();t.R7$(2),t.E5c(" Showing ",e.currentPage*e.pageSize+1," to ",e.Math.min((e.currentPage+1)*e.pageSize,e.totalElements)," of ",e.totalElements," parliaments "),t.R7$(3),t.AVh("disabled",0===e.currentPage),t.R7$(),t.Y8G("disabled",0===e.currentPage),t.R7$(2),t.Y8G("ngForOf",e.getPageNumbers()),t.R7$(),t.AVh("disabled",e.currentPage===e.totalPages-1),t.R7$(),t.Y8G("disabled",e.currentPage===e.totalPages-1)}}let j=(()=>{class a{constructor(e,i,n){this.parliamentService=e,this.toastService=i,this.authService=n,this.parliaments=[],this.isLoading=!1,this.currentPage=0,this.pageSize=20,this.totalPages=0,this.totalElements=0,this.searchTerm="",this.statusFilter="",this.sortBy="startDate",this.sortDir="desc",this.ParliamentHelper=g,this.Math=Math}ngOnInit(){this.loadParliaments()}loadParliaments(){let e;this.isLoading=!0,console.log("Loading parliaments with searchTerm:",this.searchTerm,"statusFilter:",this.statusFilter),this.searchTerm&&this.searchTerm.trim()?(console.log("Using searchParliaments with term:",this.searchTerm.trim()),e=this.parliamentService.searchParliaments(this.searchTerm.trim(),this.currentPage,this.pageSize,this.sortBy,this.sortDir)):this.statusFilter?(console.log("Using getActiveParliaments"),e=this.parliamentService.getActiveParliaments(this.currentPage,this.pageSize,this.sortBy,this.sortDir)):(console.log("Using getAllParliaments"),e=this.parliamentService.getAllParliaments(this.currentPage,this.pageSize,this.sortBy,this.sortDir)),e.subscribe({next:i=>{this.isLoading=!1,i.status?(this.parliaments=i.data,this.totalPages=i.totalPages,this.totalElements=i.totalElements):this.toastService.error("Error","Failed to load parliaments")},error:i=>{this.isLoading=!1,console.error("Error loading parliaments:",i),this.toastService.error("Error","Failed to load parliaments. Please try again.")}})}onSearch(){console.log("Search triggered with term:",this.searchTerm),this.currentPage=0,this.loadParliaments()}onClearSearch(){this.searchTerm="",this.statusFilter="",this.currentPage=0,this.loadParliaments()}onStatusChange(){this.currentPage=0,this.loadParliaments()}onSortChange(){this.currentPage=0,this.loadParliaments()}onSort(e,i){i.preventDefault(),this.sortBy===e?this.sortDir="asc"===this.sortDir?"desc":"asc":(this.sortBy=e,this.sortDir="asc"),this.currentPage=0,this.loadParliaments()}onPageChange(e){this.currentPage=e,this.loadParliaments()}onPageSizeChange(){this.currentPage=0,this.loadParliaments()}getPageNumbers(){const e=[],i=Math.max(0,this.currentPage-2),n=Math.min(this.totalPages-1,this.currentPage+2);for(let s=i;s<=n;s++)e.push(s);return e}setCurrentParliament(e){confirm(`Are you sure you want to set "${e.name}" as the current parliament?`)&&this.parliamentService.setCurrentParliamentByUid(e.uid).subscribe({next:i=>{i.status?(this.toastService.success("Success","Parliament set as current successfully"),this.loadParliaments()):this.toastService.error("Error","Failed to set parliament as current")},error:i=>{console.error("Error setting current parliament:",i),this.toastService.error("Error","Failed to set parliament as current. Please try again.")}})}deleteParliament(e){confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`)&&this.parliamentService.deleteParliamentByUid(e.uid).subscribe({next:i=>{i.status?(this.toastService.success("Success","Parliament deleted successfully"),this.loadParliaments()):this.toastService.error("Error","Failed to delete parliament")},error:i=>{console.error("Error deleting parliament:",i),this.toastService.error("Error","Failed to delete parliament. Please try again.")}})}static{this.\u0275fac=function(i){return new(i||a)(t.rXU(h.J),t.rXU(p.f),t.rXU(b.u))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-parliament-list"]],standalone:!0,features:[t.aNF],decls:70,vars:14,consts:[[1,"container-fluid"],[1,"card","mb-4"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],["for","searchTerm",1,"form-label"],["type","text","id","searchTerm","placeholder","Search by name, code or description...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"col-md-3"],["for","statusFilter",1,"form-label"],["id","statusFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],["value","current"],["value","active"],["value","inSession"],["value","ended"],["value","upcoming"],["for","sortBy",1,"form-label"],["id","sortBy",1,"form-select",3,"ngModelChange","change","ngModel"],["value","startDate"],["value","endDate"],["value","name"],["value","code"],["value","createdAt"],[1,"col-md-2","d-flex","align-items-end"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"bi","bi-search","me-1"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"bi","bi-building","me-2"],[1,"d-flex","align-items-center","gap-2"],["routerLink","/parliaments/create",1,"btn","btn-primary","btn-sm"],[1,"bi","bi-plus","me-1"],[1,"text-muted","me-2"],[1,"form-select","form-select-sm","w-auto",3,"ngModelChange","change","ngModel"],[3,"value"],["class","text-center py-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-4",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"bi","bi-building","display-1","text-muted"],[1,"mt-3"],[1,"text-muted"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-light"],[1,"sortable",3,"click"],[1,"bi"],[4,"ngFor","ngForOf"],[1,"badge","bg-primary"],[1,"badge","bg-info"],[1,"badge",3,"ngClass"],[1,"badge"],["role","group",1,"btn-group","btn-group-sm"],["type","button","title","Edit parliament",1,"btn","btn-outline-primary",3,"routerLink"],[1,"bi","bi-pencil"],["type","button","class","btn btn-outline-success","title","Set as current",3,"click",4,"ngIf"],["type","button","title","Delete parliament",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],["type","button","title","Set as current",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-star"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"page-link",3,"click"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t.EFF(6,"Search Parliaments"),t.k0s(),t.j41(7,"input",6),t.mxI("ngModelChange",function(o){return t.DH7(n.searchTerm,o)||(n.searchTerm=o),o}),t.bIt("keyup.enter",function(){return n.onSearch()}),t.k0s()(),t.j41(8,"div",7)(9,"label",8),t.EFF(10,"Filter by Status"),t.k0s(),t.j41(11,"select",9),t.mxI("ngModelChange",function(o){return t.DH7(n.statusFilter,o)||(n.statusFilter=o),o}),t.bIt("change",function(){return n.onStatusChange()}),t.j41(12,"option",10),t.EFF(13,"All Status"),t.k0s(),t.j41(14,"option",11),t.EFF(15,"Current"),t.k0s(),t.j41(16,"option",12),t.EFF(17,"Active"),t.k0s(),t.j41(18,"option",13),t.EFF(19,"In Session"),t.k0s(),t.j41(20,"option",14),t.EFF(21,"Ended"),t.k0s(),t.j41(22,"option",15),t.EFF(23,"Upcoming"),t.k0s()()(),t.j41(24,"div",7)(25,"label",16),t.EFF(26,"Sort By"),t.k0s(),t.j41(27,"select",17),t.mxI("ngModelChange",function(o){return t.DH7(n.sortBy,o)||(n.sortBy=o),o}),t.bIt("change",function(){return n.onSortChange()}),t.j41(28,"option",18),t.EFF(29,"Start Date"),t.k0s(),t.j41(30,"option",19),t.EFF(31,"End Date"),t.k0s(),t.j41(32,"option",20),t.EFF(33,"Name"),t.k0s(),t.j41(34,"option",21),t.EFF(35,"Code"),t.k0s(),t.j41(36,"option",22),t.EFF(37,"Created Date"),t.k0s()()(),t.j41(38,"div",23)(39,"button",24),t.bIt("click",function(){return n.onSearch()}),t.nrm(40,"i",25),t.EFF(41," Search "),t.k0s(),t.j41(42,"button",26),t.bIt("click",function(){return n.onClearSearch()}),t.nrm(43,"i",27),t.EFF(44," Clear "),t.k0s()()()()(),t.j41(45,"div",28)(46,"div",29)(47,"h5",30),t.nrm(48,"i",31),t.EFF(49," All Parliaments "),t.k0s(),t.j41(50,"div",32)(51,"a",33),t.nrm(52,"i",34),t.EFF(53," New Parliament "),t.k0s(),t.j41(54,"span",35),t.EFF(55,"Page Size:"),t.k0s(),t.j41(56,"select",36),t.mxI("ngModelChange",function(o){return t.DH7(n.pageSize,o)||(n.pageSize=o),o}),t.bIt("change",function(){return n.onPageSizeChange()}),t.j41(57,"option",37),t.EFF(58,"10"),t.k0s(),t.j41(59,"option",37),t.EFF(60,"20"),t.k0s(),t.j41(61,"option",37),t.EFF(62,"50"),t.k0s(),t.j41(63,"option",37),t.EFF(64,"100"),t.k0s()()()(),t.j41(65,"div",2),t.DNE(66,f,6,0,"div",38)(67,F,6,0,"div",38)(68,k,22,9,"div",39)(69,S,12,10,"div",40),t.k0s()()()),2&i&&(t.R7$(7),t.R50("ngModel",n.searchTerm),t.R7$(4),t.R50("ngModel",n.statusFilter),t.R7$(16),t.R50("ngModel",n.sortBy),t.R7$(12),t.Y8G("disabled",n.isLoading),t.R7$(3),t.Y8G("disabled",n.isLoading),t.R7$(14),t.R50("ngModel",n.pageSize),t.R7$(),t.Y8G("value",10),t.R7$(2),t.Y8G("value",20),t.R7$(2),t.Y8G("value",50),t.R7$(2),t.Y8G("value",100),t.R7$(3),t.Y8G("ngIf",n.isLoading),t.R7$(),t.Y8G("ngIf",!n.isLoading&&0===n.parliaments.length),t.R7$(),t.Y8G("ngIf",!n.isLoading&&n.parliaments.length>0),t.R7$(),t.Y8G("ngIf",!n.isLoading&&n.totalPages>1))},dependencies:[m.MD,m.YU,m.Sq,m.bT,c.YN,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,d.iI,d.Wk],styles:[".sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.sortable[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{position:relative}.table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);font-size:.8rem}.badge[_ngcontent-%COMP%]{font-size:.75rem}"]})}}return a})()}}]);