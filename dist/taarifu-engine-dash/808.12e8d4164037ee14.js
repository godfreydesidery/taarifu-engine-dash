"use strict";(self.webpackChunktaarifu_engine_dash=self.webpackChunktaarifu_engine_dash||[]).push([[808],{7808:(b,d,s)=>{s.r(d),s.d(d,{RegionFormComponent:()=>E});var m=s(177),n=s(4341),e=s(4438),p=s(5996),c=s(1069),f=s(5423);function h(r,u){1&r&&(e.j41(0,"div",46),e.EFF(1," Region name is required "),e.k0s())}function F(r,u){1&r&&(e.j41(0,"div",46),e.EFF(1," Region name must not exceed 100 characters "),e.k0s())}function v(r,u){1&r&&e.nrm(0,"span",47)}let E=(()=>{class r{constructor(o,t,i,a,l){this.fb=o,this.regionService=t,this.router=i,this.route=a,this.toastService=l,this.isEditMode=!1,this.isLoading=!1,this.regionId=null,this.regionForm=this.fb.group({name:["",[n.k0.required,n.k0.maxLength(100)]],capital:["",[n.k0.maxLength(100)]],population:[null,[n.k0.min(0)]],areaSqKm:[null,[n.k0.min(0)]],latitude:[null],longitude:[null],commissioner:["",[n.k0.maxLength(100)]],description:["",[n.k0.maxLength(500)]],isActive:[!0]})}ngOnInit(){this.regionId=this.route.snapshot.paramMap.get("uid"),this.isEditMode=!!this.regionId,this.isEditMode&&this.regionId&&this.loadRegion(this.regionId)}loadRegion(o){this.isLoading=!0,console.log("Loading region with UID:",o),this.regionService.getRegionByUid(o).subscribe({next:t=>{if(this.isLoading=!1,console.log("Region API Response:",t),t.status){const i=t.data;console.log("Region data:",i),this.regionForm.patchValue({name:i.name,capital:i.capital,population:i.population,areaSqKm:i.areaSqKm,latitude:i.latitude,longitude:i.longitude,commissioner:i.commissioner,description:i.description,isActive:i.isActive})}},error:t=>{this.isLoading=!1,console.error("Error loading region:",t),console.error("Error status:",t.status),console.error("Error details:",t.error),this.toastService.error("Error Loading Region",t.error?.message||t.message||"Unknown error"),this.goBack()}})}onSubmit(){if(this.regionForm.valid){this.isLoading=!0;const o=this.regionForm.value;this.isEditMode&&this.regionId?this.regionService.updateRegion(this.regionId,{name:o.name,capital:o.capital,population:o.population,areaSqKm:o.areaSqKm,latitude:o.latitude,longitude:o.longitude,commissioner:o.commissioner,description:o.description,isActive:o.isActive}).subscribe({next:i=>{this.isLoading=!1,i.status&&(this.toastService.success("Region Updated","Region updated successfully!"),this.goBack())},error:i=>{this.isLoading=!1,console.error("Error updating region:",i),this.toastService.error("Error Updating Region","Failed to update region")}}):this.regionService.createRegion({name:o.name,capital:o.capital,population:o.population,areaSqKm:o.areaSqKm,latitude:o.latitude,longitude:o.longitude,commissioner:o.commissioner,description:o.description,isActive:o.isActive}).subscribe({next:i=>{this.isLoading=!1,i.status&&(this.toastService.success("Region Created","Region created successfully!"),this.goBack())},error:i=>{this.isLoading=!1,console.error("Error creating region:",i),this.toastService.error("Error Creating Region","Failed to create region")}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.regionForm.controls).forEach(o=>{this.regionForm.get(o)?.markAsTouched()})}goBack(){this.router.navigate(["/regions"])}static{this.\u0275fac=function(t){return new(t||r)(e.rXU(n.ok),e.rXU(p.S),e.rXU(c.Ix),e.rXU(c.nX),e.rXU(f.f))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-region-form"]],standalone:!0,features:[e.aNF],decls:120,vars:10,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"h3","mb-1"],[1,"text-muted"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-arrow-left","me-1"],[1,"row"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"bi","bi-geo-alt-fill","me-2"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"col-md-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter region name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","capital",1,"form-label"],["type","text","id","capital","formControlName","capital","placeholder","Enter capital city",1,"form-control"],["for","population",1,"form-label"],["type","number","id","population","formControlName","population","min","0","placeholder","Enter population",1,"form-control"],["for","areaSqKm",1,"form-label"],["type","number","id","areaSqKm","formControlName","areaSqKm","min","0","step","0.01","placeholder","Enter area in square kilometers",1,"form-control"],["for","latitude",1,"form-label"],["type","number","id","latitude","formControlName","latitude","step","0.000001","placeholder","Enter latitude",1,"form-control"],["for","longitude",1,"form-label"],["type","number","id","longitude","formControlName","longitude","step","0.000001","placeholder","Enter longitude",1,"form-control"],["for","commissioner",1,"form-label"],["type","text","id","commissioner","formControlName","commissioner","placeholder","Enter commissioner name",1,"form-control"],[1,"form-label"],[1,"form-check","form-switch"],["type","checkbox","id","isActive","formControlName","isActive",1,"form-check-input"],["for","isActive",1,"form-check-label"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3","placeholder","Enter region description",1,"form-control"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],[1,"col-lg-4"],[1,"bi","bi-info-circle","me-2"],[1,"list-unstyled","small","text-muted"],[1,"mt-3"],[1,"invalid-feedback"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,i){if(1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4),e.k0s(),e.j41(5,"p",3),e.EFF(6),e.k0s()(),e.j41(7,"button",4),e.bIt("click",function(){return i.goBack()}),e.nrm(8,"i",5),e.EFF(9," Back "),e.k0s()(),e.j41(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"h5",10),e.nrm(15,"i",11),e.EFF(16," Region Information "),e.k0s()(),e.j41(17,"div",12)(18,"form",13),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(19,"div",6)(20,"div",14)(21,"div",15)(22,"label",16),e.EFF(23,"Region Name "),e.j41(24,"span",17),e.EFF(25,"*"),e.k0s()(),e.nrm(26,"input",18),e.DNE(27,h,2,0,"div",19)(28,F,2,0,"div",19),e.k0s()(),e.j41(29,"div",14)(30,"div",15)(31,"label",20),e.EFF(32,"Capital"),e.k0s(),e.nrm(33,"input",21),e.k0s()()(),e.j41(34,"div",6)(35,"div",14)(36,"div",15)(37,"label",22),e.EFF(38,"Population"),e.k0s(),e.nrm(39,"input",23),e.k0s()(),e.j41(40,"div",14)(41,"div",15)(42,"label",24),e.EFF(43,"Area (km\xb2)"),e.k0s(),e.nrm(44,"input",25),e.k0s()()(),e.j41(45,"div",6)(46,"div",14)(47,"div",15)(48,"label",26),e.EFF(49,"Latitude"),e.k0s(),e.nrm(50,"input",27),e.k0s()(),e.j41(51,"div",14)(52,"div",15)(53,"label",28),e.EFF(54,"Longitude"),e.k0s(),e.nrm(55,"input",29),e.k0s()()(),e.j41(56,"div",6)(57,"div",14)(58,"div",15)(59,"label",30),e.EFF(60,"Regional Commissioner"),e.k0s(),e.nrm(61,"input",31),e.k0s()(),e.j41(62,"div",14)(63,"div",15)(64,"label",32),e.EFF(65,"Status"),e.k0s(),e.j41(66,"div",33),e.nrm(67,"input",34),e.j41(68,"label",35),e.EFF(69," Active "),e.k0s()()()()(),e.j41(70,"div",15)(71,"label",36),e.EFF(72,"Description"),e.k0s(),e.nrm(73,"textarea",37),e.k0s(),e.j41(74,"div",38)(75,"button",39),e.bIt("click",function(){return i.goBack()}),e.EFF(76," Cancel "),e.k0s(),e.j41(77,"button",40),e.DNE(78,v,1,0,"span",41),e.EFF(79),e.k0s()()()()()(),e.j41(80,"div",42)(81,"div",8)(82,"div",9)(83,"h6",10),e.nrm(84,"i",43),e.EFF(85," Help & Guidelines "),e.k0s()(),e.j41(86,"div",12)(87,"h6"),e.EFF(88,"Required Fields"),e.k0s(),e.j41(89,"ul",44)(90,"li"),e.EFF(91,"\u2022 Region Name"),e.k0s(),e.j41(92,"li"),e.EFF(93,"\u2022 Capital"),e.k0s(),e.j41(94,"li"),e.EFF(95,"\u2022 Commissioner"),e.k0s()(),e.j41(96,"h6",45),e.EFF(97,"Optional Fields"),e.k0s(),e.j41(98,"ul",44)(99,"li"),e.EFF(100,"\u2022 Population"),e.k0s(),e.j41(101,"li"),e.EFF(102,"\u2022 Area (km\xb2)"),e.k0s(),e.j41(103,"li"),e.EFF(104,"\u2022 Coordinates (Latitude/Longitude)"),e.k0s(),e.j41(105,"li"),e.EFF(106,"\u2022 Description"),e.k0s()(),e.j41(107,"h6",45),e.EFF(108,"Tips"),e.k0s(),e.j41(109,"ul",44)(110,"li"),e.EFF(111,"\u2022 Use official region names"),e.k0s(),e.j41(112,"li"),e.EFF(113,"\u2022 Capital should be the main city"),e.k0s(),e.j41(114,"li"),e.EFF(115,"\u2022 Use precise coordinates for mapping"),e.k0s(),e.j41(116,"li"),e.EFF(117,"\u2022 Population should be current estimates"),e.k0s(),e.j41(118,"li"),e.EFF(119,"\u2022 Keep descriptions concise and informative"),e.k0s()()()()()()()),2&t){let a,l,g;e.R7$(4),e.JRh(i.isEditMode?"Edit Region":"Create Region"),e.R7$(2),e.JRh(i.isEditMode?"Update region information":"Add a new region to the system"),e.R7$(12),e.Y8G("formGroup",i.regionForm),e.R7$(8),e.AVh("is-invalid",(null==(a=i.regionForm.get("name"))?null:a.invalid)&&(null==(a=i.regionForm.get("name"))?null:a.touched)),e.R7$(),e.Y8G("ngIf",null==(l=i.regionForm.get("name"))?null:l.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(g=i.regionForm.get("name"))?null:g.hasError("maxlength")),e.R7$(49),e.Y8G("disabled",i.regionForm.invalid||i.isLoading),e.R7$(),e.Y8G("ngIf",i.isLoading),e.R7$(),e.SpI(" ",i.isLoading?"Saving...":i.isEditMode?"Update Region":"Create Region"," ")}},dependencies:[m.MD,m.bT,n.X1,n.qT,n.me,n.Q0,n.Zm,n.BC,n.cb,n.VZ,n.j4,n.JD],styles:[".container-fluid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1rem}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}"]})}}return r})()}}]);