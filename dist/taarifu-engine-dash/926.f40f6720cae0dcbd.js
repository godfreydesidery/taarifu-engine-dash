"use strict";(self.webpackChunktaarifu_engine_dash=self.webpackChunktaarifu_engine_dash||[]).push([[926],{926:(F,h,c)=>{c.r(h),c.d(h,{AreaListComponent:()=>I});var d=c(177),g=c(4341),p=c(1069),r=function(s){return s.REGION="REGION",s.DISTRICT="DISTRICT",s.WARD="WARD",s.VILLAGE="VILLAGE",s.HAMLET="HAMLET",s.CONSTITUENCY="CONSTITUENCY",s}(r||{});class u{static getDisplayName(n){switch(n){case r.REGION:return"Region";case r.DISTRICT:return"District";case r.WARD:return"Ward";case r.VILLAGE:return"Village";case r.HAMLET:return"Hamlet";case r.CONSTITUENCY:return"Constituency";default:return"Unknown"}}static getDescription(n){switch(n){case r.REGION:return"Top level administrative division in Tanzania";case r.DISTRICT:return"Second level administrative division under region";case r.WARD:return"Third level administrative division under district";case r.VILLAGE:return"Fourth level administrative division under ward";case r.HAMLET:return"Fifth level administrative division under village";case r.CONSTITUENCY:return"Political/parliamentary division for elections";default:return"Unknown area type"}}static getColorCode(n){switch(n){case r.REGION:return"#1E40AF";case r.DISTRICT:return"#059669";case r.WARD:return"#DC2626";case r.VILLAGE:return"#7C3AED";case r.HAMLET:return"#EA580C";case r.CONSTITUENCY:return"#0891B2";default:return"#6B7280"}}static getLevel(n){switch(n){case r.REGION:return 1;case r.DISTRICT:case r.CONSTITUENCY:return 2;case r.WARD:return 3;case r.VILLAGE:return 4;case r.HAMLET:return 5;default:return 0}}static isAdministrative(n){return n!==r.CONSTITUENCY}static isPolitical(n){return n===r.CONSTITUENCY}static getParentType(n){switch(n){case r.REGION:return null;case r.DISTRICT:case r.CONSTITUENCY:return r.REGION;case r.WARD:return r.DISTRICT;case r.VILLAGE:return r.WARD;case r.HAMLET:return r.VILLAGE;default:return null}}static getChildTypes(n){switch(n){case r.REGION:return[r.DISTRICT,r.CONSTITUENCY];case r.DISTRICT:return[r.WARD];case r.WARD:return[r.VILLAGE];case r.VILLAGE:return[r.HAMLET];default:return[]}}static getAllTypes(){return[r.REGION,r.DISTRICT,r.WARD,r.VILLAGE,r.HAMLET,r.CONSTITUENCY]}}var e=c(4438),m=c(7845),T=c(5423),A=c(8010);function C(s,n){if(1&s&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&s){const t=n.$implicit,i=e.XpG();e.Y8G("value",t),e.R7$(),e.JRh(i.AreaTypeHelper.getDisplayName(t))}}function _(s,n){1&s&&(e.j41(0,"div",33)(1,"div",34)(2,"span",35),e.EFF(3,"Loading..."),e.k0s()(),e.j41(4,"p",36),e.EFF(5,"Loading areas..."),e.k0s()())}function y(s,n){1&s&&(e.j41(0,"div",33),e.nrm(1,"i",37),e.j41(2,"h5",38),e.EFF(3,"No Areas Found"),e.k0s(),e.j41(4,"p",39),e.EFF(5,"No areas match your search criteria."),e.k0s()())}function f(s,n){if(1&s&&(e.j41(0,"tr")(1,"td")(2,"span",46),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"strong"),e.EFF(6),e.k0s()(),e.j41(7,"td")(8,"span",47),e.nrm(9,"i",48),e.EFF(10),e.k0s()(),e.j41(11,"td")(12,"span",49),e.EFF(13),e.k0s()(),e.j41(14,"td")(15,"span",47),e.EFF(16),e.k0s()()()),2&s){const t=n.$implicit,i=e.XpG(2);e.R7$(3),e.JRh(t.code),e.R7$(3),e.JRh(t.name),e.R7$(2),e.xc7("background-color",i.AreaTypeHelper.getColorCode(t.areaType))("color","white"),e.R7$(),e.Y8G("ngClass",i.getAreaTypeIcon(t.areaType)),e.R7$(),e.SpI(" ",i.AreaTypeHelper.getDisplayName(t.areaType)," "),e.R7$(3),e.JRh(i.AreaTypeHelper.getLevel(t.areaType)),e.R7$(2),e.AVh("bg-success",i.AreaTypeHelper.isAdministrative(t.areaType))("bg-warning",i.AreaTypeHelper.isPolitical(t.areaType)),e.R7$(),e.SpI(" ",i.AreaTypeHelper.isAdministrative(t.areaType)?"Administrative":"Political"," ")}}function b(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",40)(1,"table",41)(2,"thead",42)(3,"tr")(4,"th",43),e.bIt("click",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.onSort("code",a))}),e.EFF(5," Code "),e.nrm(6,"i",44),e.k0s(),e.j41(7,"th",43),e.bIt("click",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.onSort("name",a))}),e.EFF(8," Name "),e.nrm(9,"i",44),e.k0s(),e.j41(10,"th",43),e.bIt("click",function(a){e.eBV(t);const o=e.XpG();return e.Njj(o.onSort("areaType",a))}),e.EFF(11," Type "),e.nrm(12,"i",44),e.k0s(),e.j41(13,"th"),e.EFF(14,"Level"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Category"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,f,17,14,"tr",45),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(6),e.AVh("bi-arrow-up","code"===t.sortBy&&"asc"===t.sortDir)("bi-arrow-down","code"===t.sortBy&&"desc"===t.sortDir),e.R7$(3),e.AVh("bi-arrow-up","name"===t.sortBy&&"asc"===t.sortDir)("bi-arrow-down","name"===t.sortBy&&"desc"===t.sortDir),e.R7$(3),e.AVh("bi-arrow-up","areaType"===t.sortBy&&"asc"===t.sortDir)("bi-arrow-down","areaType"===t.sortBy&&"desc"===t.sortDir),e.R7$(6),e.Y8G("ngForOf",t.areas)}}function v(s,n){if(1&s){const t=e.RV6();e.j41(0,"li",52)(1,"button",57),e.bIt("click",function(){const a=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.onPageChange(a))}),e.EFF(2),e.k0s()()}if(2&s){const t=n.$implicit,i=e.XpG(2);e.AVh("active",t===i.currentPage),e.R7$(2),e.JRh(t+1)}}function E(s,n){if(1&s){const t=e.RV6();e.j41(0,"div",50)(1,"div",39),e.EFF(2),e.k0s(),e.j41(3,"nav")(4,"ul",51)(5,"li",52)(6,"button",53),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onPageChange(a.currentPage-1))}),e.nrm(7,"i",54),e.k0s()(),e.DNE(8,v,3,3,"li",55),e.j41(9,"li",52)(10,"button",53),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.onPageChange(a.currentPage+1))}),e.nrm(11,"i",56),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(2),e.E5c(" Showing ",t.currentPage*t.pageSize+1," to ",t.Math.min((t.currentPage+1)*t.pageSize,t.totalElements)," of ",t.totalElements," areas "),e.R7$(3),e.AVh("disabled",0===t.currentPage),e.R7$(),e.Y8G("disabled",0===t.currentPage),e.R7$(2),e.Y8G("ngForOf",t.getPageNumbers()),e.R7$(),e.AVh("disabled",t.currentPage===t.totalPages-1),e.R7$(),e.Y8G("disabled",t.currentPage===t.totalPages-1)}}let I=(()=>{class s{constructor(t,i,a){this.areaService=t,this.toastService=i,this.authService=a,this.areas=[],this.areaTypes=u.getAllTypes(),this.isLoading=!1,this.currentPage=0,this.pageSize=20,this.totalPages=0,this.totalElements=0,this.searchTerm="",this.selectedAreaType="",this.sortBy="code",this.sortDir="asc",this.AreaTypeHelper=u,this.Math=Math}ngOnInit(){this.loadAreas()}loadAreas(){let t;this.isLoading=!0,console.log("Loading areas with searchTerm:",this.searchTerm,"selectedAreaType:",this.selectedAreaType),this.searchTerm&&this.searchTerm.trim()?this.selectedAreaType?(console.log("Using searchAreasByType with type:",this.selectedAreaType,"term:",this.searchTerm.trim()),t=this.areaService.searchAreasByType(this.selectedAreaType,this.searchTerm.trim(),this.currentPage,this.pageSize,this.sortBy,this.sortDir)):(console.log("Using searchAreas with term:",this.searchTerm.trim()),t=this.areaService.searchAreas(this.searchTerm.trim(),this.currentPage,this.pageSize,this.sortBy,this.sortDir)):this.selectedAreaType?(console.log("Using getAreasByType with type:",this.selectedAreaType),t=this.areaService.getAreasByType(this.selectedAreaType,this.currentPage,this.pageSize,this.sortBy,this.sortDir)):(console.log("Using getAllAreas"),t=this.areaService.getAllAreas(this.currentPage,this.pageSize,this.sortBy,this.sortDir)),t.subscribe({next:i=>{this.isLoading=!1,i.status?(this.areas=i.data,this.totalPages=i.totalPages,this.totalElements=i.totalElements):this.toastService.error("Error","Failed to load areas")},error:i=>{this.isLoading=!1,console.error("Error loading areas:",i),this.toastService.error("Error","Failed to load areas. Please try again.")}})}onSearch(){console.log("Search triggered with term:",this.searchTerm),this.currentPage=0,this.loadAreas()}onClearSearch(){this.searchTerm="",this.selectedAreaType="",this.currentPage=0,this.loadAreas()}onAreaTypeChange(){this.currentPage=0,this.loadAreas()}onSortChange(){this.currentPage=0,this.loadAreas()}onSort(t,i){i.preventDefault(),this.sortBy===t?this.sortDir="asc"===this.sortDir?"desc":"asc":(this.sortBy=t,this.sortDir="asc"),this.currentPage=0,this.loadAreas()}onPageChange(t){this.currentPage=t,this.loadAreas()}onPageSizeChange(){this.currentPage=0,this.loadAreas()}getPageNumbers(){const t=[],i=Math.max(0,this.currentPage-2),a=Math.min(this.totalPages-1,this.currentPage+2);for(let o=i;o<=a;o++)t.push(o);return t}getAreaTypeIcon(t){switch(t){case r.REGION:return"bi-geo-alt-fill";case r.DISTRICT:return"bi-building";case r.WARD:return"bi-house";case r.VILLAGE:return"bi-house-door";case r.HAMLET:return"bi-house-door-fill";case r.CONSTITUENCY:return"bi-flag-fill";default:return"bi-question-circle"}}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(m.x),e.rXU(T.f),e.rXU(A.u))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-area-list"]],standalone:!0,features:[e.aNF],decls:54,vars:15,consts:[[1,"container-fluid"],[1,"card","mb-4"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],["for","searchTerm",1,"form-label"],["type","text","id","searchTerm","placeholder","Search by name, code or area type...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"col-md-3"],["for","areaTypeFilter",1,"form-label"],["id","areaTypeFilter",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","sortBy",1,"form-label"],["id","sortBy",1,"form-select",3,"ngModelChange","change","ngModel"],["value","code"],["value","areaType"],["value","areaId"],[1,"col-md-2","d-flex","align-items-end"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"bi","bi-search","me-1"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-x-circle","me-1"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"bi","bi-geo-alt","me-2"],[1,"d-flex","align-items-center","gap-2"],[1,"text-muted","me-2"],[1,"form-select","form-select-sm","w-auto",3,"ngModelChange","change","ngModel"],[3,"value"],["class","text-center py-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-4",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"bi","bi-inbox","display-1","text-muted"],[1,"mt-3"],[1,"text-muted"],[1,"table-responsive"],[1,"table","table-hover"],[1,"table-light"],[1,"sortable",3,"click"],[1,"bi"],[4,"ngFor","ngForOf"],[1,"badge","bg-primary"],[1,"badge"],[1,"bi",2,"margin-right","4px",3,"ngClass"],[1,"badge","bg-info"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"pagination","pagination-sm","mb-0"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-right"],[1,"page-link",3,"click"]],template:function(i,a){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e.EFF(6,"Search Areas"),e.k0s(),e.j41(7,"input",6),e.mxI("ngModelChange",function(l){return e.DH7(a.searchTerm,l)||(a.searchTerm=l),l}),e.bIt("keyup.enter",function(){return a.onSearch()}),e.k0s()(),e.j41(8,"div",7)(9,"label",8),e.EFF(10,"Filter by Type"),e.k0s(),e.j41(11,"select",9),e.mxI("ngModelChange",function(l){return e.DH7(a.selectedAreaType,l)||(a.selectedAreaType=l),l}),e.bIt("change",function(){return a.onAreaTypeChange()}),e.j41(12,"option",10),e.EFF(13,"All Types"),e.k0s(),e.DNE(14,C,2,2,"option",11),e.k0s()(),e.j41(15,"div",7)(16,"label",12),e.EFF(17,"Sort By"),e.k0s(),e.j41(18,"select",13),e.mxI("ngModelChange",function(l){return e.DH7(a.sortBy,l)||(a.sortBy=l),l}),e.bIt("change",function(){return a.onSortChange()}),e.j41(19,"option",14),e.EFF(20,"Code"),e.k0s(),e.j41(21,"option",15),e.EFF(22,"Type"),e.k0s(),e.j41(23,"option",16),e.EFF(24,"Area ID"),e.k0s()()(),e.j41(25,"div",17)(26,"button",18),e.bIt("click",function(){return a.onSearch()}),e.nrm(27,"i",19),e.EFF(28," Search "),e.k0s(),e.j41(29,"button",20),e.bIt("click",function(){return a.onClearSearch()}),e.nrm(30,"i",21),e.EFF(31," Clear "),e.k0s()()()()(),e.j41(32,"div",22)(33,"div",23)(34,"h5",24),e.nrm(35,"i",25),e.EFF(36," All Areas "),e.k0s(),e.j41(37,"div",26)(38,"span",27),e.EFF(39,"Page Size:"),e.k0s(),e.j41(40,"select",28),e.mxI("ngModelChange",function(l){return e.DH7(a.pageSize,l)||(a.pageSize=l),l}),e.bIt("change",function(){return a.onPageSizeChange()}),e.j41(41,"option",29),e.EFF(42,"10"),e.k0s(),e.j41(43,"option",29),e.EFF(44,"20"),e.k0s(),e.j41(45,"option",29),e.EFF(46,"50"),e.k0s(),e.j41(47,"option",29),e.EFF(48,"100"),e.k0s()()()(),e.j41(49,"div",2),e.DNE(50,_,6,0,"div",30)(51,y,6,0,"div",30)(52,b,19,13,"div",31)(53,E,12,10,"div",32),e.k0s()()()),2&i&&(e.R7$(7),e.R50("ngModel",a.searchTerm),e.R7$(4),e.R50("ngModel",a.selectedAreaType),e.R7$(3),e.Y8G("ngForOf",a.areaTypes),e.R7$(4),e.R50("ngModel",a.sortBy),e.R7$(8),e.Y8G("disabled",a.isLoading),e.R7$(3),e.Y8G("disabled",a.isLoading),e.R7$(11),e.R50("ngModel",a.pageSize),e.R7$(),e.Y8G("value",10),e.R7$(2),e.Y8G("value",20),e.R7$(2),e.Y8G("value",50),e.R7$(2),e.Y8G("value",100),e.R7$(3),e.Y8G("ngIf",a.isLoading),e.R7$(),e.Y8G("ngIf",!a.isLoading&&0===a.areas.length),e.R7$(),e.Y8G("ngIf",!a.isLoading&&a.areas.length>0),e.R7$(),e.Y8G("ngIf",!a.isLoading&&a.totalPages>1))},dependencies:[d.MD,d.YU,d.Sq,d.bT,g.YN,g.xH,g.y7,g.me,g.wz,g.BC,g.vS,p.iI],styles:[".sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.sortable[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{position:relative}.table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);font-size:.8rem}.badge[_ngcontent-%COMP%]{font-size:.75rem}code[_ngcontent-%COMP%]{font-size:.8rem}"]})}}return s})()}}]);