"use strict";(self.webpackChunktaarifu_engine_dash=self.webpackChunktaarifu_engine_dash||[]).push([[842],{461:(L,d,t)=>{t.r(d),t.d(d,{LoginComponent:()=>F});var m=t(177),r=t(4341),p=t(6029),e=t(4438),_=t(8010),f=t(1069),h=t(5423);function b(i,u){1&i&&(e.j41(0,"div",21),e.EFF(1," Username is required "),e.k0s())}function v(i,u){1&i&&(e.j41(0,"div",21),e.EFF(1," Password is required "),e.k0s())}function E(i,u){1&i&&e.nrm(0,"span",22)}let F=(()=>{class i{constructor(a,o,n,s){this.fb=a,this.authService=o,this.router=n,this.toastService=s,this.hidePassword=!0,this.isLoading=!1,this.loginForm=this.fb.group({username:["",[r.k0.required]],password:["",[r.k0.required]]}),console.log("Login page loaded - clearing any existing tokens"),this.authService.logout()}onSubmit(){this.loginForm.valid&&(this.isLoading=!0,this.authService.login({usernameOrEmail:this.loginForm.value.username,password:this.loginForm.value.password,rememberMe:!1}).subscribe({next:o=>{this.isLoading=!1,o.status&&this.router.navigate(["/dashboard"])},error:o=>{this.isLoading=!1,console.error("Login error:",o),this.toastService.error("Login Failed",o.error?.message||"Please check your credentials and try again.")}}))}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(r.ok),e.rXU(_.u),e.rXU(f.Ix),e.rXU(h.f))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-login"]],standalone:!0,features:[e.aNF],decls:31,vars:15,consts:[[1,"login-container"],[1,"card","login-card"],[1,"card-header","text-center"],[1,"card-title","mb-1"],[1,"text-muted"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-person"],["type","text","id","username","formControlName","username","autocomplete","username",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label"],[1,"bi","bi-lock"],["id","password","formControlName","password","autocomplete","current-password",1,"form-control",3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],[1,"invalid-feedback"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),e.EFF(4,"Taarifu Engine Login"),e.k0s(),e.j41(5,"small",4),e.EFF(6,"Administration Portal"),e.k0s()(),e.j41(7,"div",5)(8,"form",6),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(9,"div",7)(10,"label",8),e.EFF(11,"Username"),e.k0s(),e.j41(12,"div",9)(13,"span",10),e.nrm(14,"i",11),e.k0s(),e.nrm(15,"input",12),e.DNE(16,b,2,0,"div",13),e.k0s()(),e.j41(17,"div",7)(18,"label",14),e.EFF(19,"Password"),e.k0s(),e.j41(20,"div",9)(21,"span",10),e.nrm(22,"i",15),e.k0s(),e.nrm(23,"input",16),e.j41(24,"button",17),e.bIt("click",function(){return n.hidePassword=!n.hidePassword}),e.nrm(25,"i",18),e.k0s(),e.DNE(26,v,2,0,"div",13),e.k0s()(),e.j41(27,"button",19),e.DNE(28,E,1,0,"span",20),e.EFF(29),e.k0s()()()(),e.nrm(30,"app-toast"),e.k0s()),2&o){let s,g,l,c;e.R7$(8),e.Y8G("formGroup",n.loginForm),e.R7$(7),e.AVh("is-invalid",(null==(s=n.loginForm.get("username"))?null:s.invalid)&&(null==(s=n.loginForm.get("username"))?null:s.touched)),e.R7$(),e.Y8G("ngIf",null==(g=n.loginForm.get("username"))?null:g.hasError("required")),e.R7$(7),e.AVh("is-invalid",(null==(l=n.loginForm.get("password"))?null:l.invalid)&&(null==(l=n.loginForm.get("password"))?null:l.touched)),e.Y8G("type",n.hidePassword?"password":"text"),e.R7$(2),e.AVh("bi-eye",!n.hidePassword)("bi-eye-slash",n.hidePassword),e.R7$(),e.Y8G("ngIf",null==(c=n.loginForm.get("password"))?null:c.hasError("required")),e.R7$(),e.Y8G("disabled",n.loginForm.invalid||n.isLoading),e.R7$(),e.Y8G("ngIf",n.isLoading),e.R7$(),e.SpI(" ",n.isLoading?"Logging in...":"Login"," ")}},dependencies:[m.MD,m.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,p.d],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#e9ecef;padding:1rem}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;box-shadow:0 8px 32px #0000001a;border:none;border-radius:1rem}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;border-radius:1rem 1rem 0 0!important;border:none}.card-title[_ngcontent-%COMP%]{color:#fff;font-weight:600}"]})}}return i})()}}]);